(this["webpackJsonpperspicacious-conductor"]=this["webpackJsonpperspicacious-conductor"]||[]).push([[0],{92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(14),s=n.n(o),a=n(17),i=n(48),l=n(15),u=n(50),d=n(37),b=n(49),j=n.n(b),p=n(5),h=n(2),O="ADD_ITEM";var x="UPDATE_NOTES";var f="UPDATE_WEIGHT";var m="REMOVE_ITEM";var g="RESET_APP";function v(e,t,n){return e.filter((function(e){return!(e.section===t&&e.prompt===n)}))}var y=Object(l.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case x:var n=e.find((function(e){return e.section===t.payload.section&&e.prompt===t.payload.prompt}))||{},c=Object(h.a)(Object(h.a)({},n),t.payload),r=v(e,t.payload.section,t.payload.prompt);return[].concat(Object(p.a)(r),[c]);case f:var o=e.find((function(e){return e.section===t.payload.section&&e.prompt===t.payload.prompt}))||{},s=Object(h.a)(Object(h.a)({},o),t.payload),a=v(e,t.payload.section,t.payload.prompt);return console.log([].concat(Object(p.a)(a),[s])),[].concat(Object(p.a)(a),[s]);case m:return v(e,t.payload.section,t.payload.prompt);case g:return[];default:return e}}}),w={key:"app",storage:j.a},N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,C=Object(l.d)(Object(d.a)(w,y),N(Object(l.a)(u.a))),k=Object(d.b)(C),S=n(28),E=n(7),_=n(35),M=n(1);function T(){var e=Object(a.c)((function(e){return e.data})),t=e.length;console.log(e);var n=Object(_.uniqBy)(e,(function(e){return e.section})).length,c=Object(_.groupBy)(e,"section");console.log(c);var r=Object.keys(c).map((function(e){var t=0,n=0,r="##### ".concat(e,"\n"),o=c[e].map((function(e){var c=void 0!==e.weight?e.weight:1,r="* ".concat(e.prompt,"\n");return e.score&&(r+="    - ".concat(Array(e.score).fill("\u2605").join("")),t+=e.score*c,n+=c>1?c:0),e.notes&&(r+="    - ".concat(e.notes)),r}));return(t=Math.round(t/(c[e].length+n)))>0&&(r+=D(t)),[r].concat(Object(p.a)(o)).join("\n")})).join("\n");return Object(M.jsx)("div",{children:Object(M.jsxs)("div",{className:"flex flex-col h-screen mx-auto md:w-3/5",children:[Object(M.jsxs)("div",{className:"",children:[Object(M.jsx)("h1",{className:"text-2xl",children:"Export"}),Object(M.jsxs)("div",{className:"flex space-x-4",children:[Object(M.jsxs)("p",{className:"text-sm",children:[n," sections used"]}),Object(M.jsxs)("p",{className:"text-sm",children:[t," responses recorded"]})]})]}),Object(M.jsx)("textarea",{readOnly:!0,className:"flex-1 flex-grow w-full h-full p-2 my-4 border-2 border-gray-200",value:r})]})})}var D=function(e){e>5&&(e=5);for(var t="",n=1;n<=e;n++)t+="\u2605";for(;n<=5;n++)t+="\u2606";return t},W=n(4),L=n(51),R=n(12),A=n.n(R),H=n(52),I=n.n(H);var P=n(9),B=["children"];function z(e){var t=e.children,n=Object(P.a)(e,B);return Object(M.jsx)("a",Object(h.a)(Object(h.a)({className:"text-blue-600 hover:text-blue-800"},n),{},{children:t}))}new(n(57).a);function F(e){return e.toLowerCase().replace(/[\s]/gi,"-")}function J(e){var t=e.score,n=void 0===t?0:t,r=e.onScoreSelect,o=void 0===r?Function.prototype:r,s=e.onScoreClear,a=void 0===s?Function.prototype:s,i=e.scoreRange,l=void 0===i?5:i,u=Object(c.useState)(0),d=Object(W.a)(u,2),b=d[0],j=d[1],p=Array(l).fill(0);return Object(M.jsxs)("div",{className:"flex items-center",children:[p.map((function(e,t){return Object(M.jsx)("button",{type:"button",className:"px-1 py-2 text-2xl pointer",onClick:function(e){return function(e,t){e.preventDefault(),j(null),o(t)}(e,t+1)},onMouseEnter:function(e){return function(e,t){e.preventDefault(),j(t)}(e,t+1)},onMouseLeave:function(e){return function(e){e.preventDefault(),j(null)}(e)},children:Object(M.jsx)(U,{tScore:b,score:n,i:t})},t)})),Object(M.jsx)("button",{type:"button",onClick:function(e){return function(e){e.preventDefault(),a()}(e)},className:"p-2 bg-gray-100 text-lg rounded hover:bg-gray-200",children:"\u21bb"})]})}function U(e){var t=e.score,n=e.tScore,c=e.i,r="";return r=n?c>=n?"\u2606":"\u2605":c>=t?"\u2606":"\u2605",Object(M.jsx)(M.Fragment,{children:r})}var V=n(56),X=n(55);function q(e){var t=Object(c.useRef)(null),n=Object(c.useState)(""),r=Object(W.a)(n,2),o=r[0],s=r[1],a=Object(c.useState)("auto"),i=Object(W.a)(a,2),l=i[0],u=i[1],d=Object(c.useState)("auto"),b=Object(W.a)(d,2),j=b[0],p=b[1];Object(c.useEffect)((function(){p("".concat(t.current.scrollHeight,"px")),u("".concat(t.current.scrollHeight,"px"))}),[o]);return Object(M.jsx)("div",{style:{minHeight:j},children:Object(M.jsx)("textarea",Object(h.a)(Object(h.a)({},e),{},{ref:t,style:{height:l},onChange:function(n){u("auto"),p("".concat(t.current.scrollHeight,"px")),s(n.target.value),e.onChange&&e.onChange(n)}}))})}var G=n(53);function K(){return Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}function Q(){return Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}function Y(){var e=Object(c.useState)(),t=Object(W.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!0),s=Object(W.a)(o,2),a=s[0],i=s[1],l=Object(c.useState)([]),u=Object(W.a)(l,2),d=u[0],b=u[1];return Object(c.useEffect)((function(){(function(){try{return I.a.get("/data/content.yml")}catch(e){console.log(e),console.log("trying to load from JSON"),fetch("/data/content.json").then((function(e){return e.json()}))}})().then((function(e){return e.data})).then((function(e){var t=L.a.load(e);r(t)}))}),[]),n?Object(M.jsxs)("div",{children:[Object(M.jsx)($,{menu:a,setMenu:i}),Object(M.jsxs)("div",{className:"flex px-4",children:[a&&Object(M.jsx)(ee,{content:n.content,menu:a}),Object(M.jsx)("div",{className:"container px-4 mx-auto",children:n.content.map((function(e,t){var n,c=d[t]||{section:e.section,visible:e.visible};return t>d.length-1&&(d.push(c),b(d)),Object(M.jsx)("div",{id:F(e.section),className:"border-b-2 border-gray-600 last:border-b-0",children:Object(M.jsxs)("details",Object(h.a)(Object(h.a)({},(n=c.visible,n?{open:!0}:{})),{},{children:[Object(M.jsx)("summary",{children:Object(M.jsx)("button",{className:"mt-4 mb-4 text-lg font-bold",title:"Click to expand/collapse",onClick:function(e){return c.visible=!c.visible,b(Object(p.a)(d)),!1},children:e.section})}),Object(M.jsx)("b",{children:"Weight"}),Z(e,c)]}))},e.section)}))})]})]}):null}function Z(e,t){var n=["white","lightgrey"];return e.prompts.map((function(c){return Object(M.jsx)(ne,{section:e.section,entry:c,bgcolor:n[e.prompts.indexOf(c)%2],visible:t.visible},c.prompt)}))}function $(e){var t=e.menu,n=e.setMenu,c=A()("border-b-2 border-gray-200 px-4 mb-4 bg-white sticky top-0 z-40");return Object(M.jsx)("div",{className:c,children:Object(M.jsx)("button",{type:"button",onClick:function(e){return console.log("Test:"+n,t),n((function(e){return!e}))},children:"menu"})})}function ee(e){var t=e.content,n=(e.menu,Object(a.b)());var c=A()("pb-4",{"sticky top-0 h-screen":!0});return Object(M.jsxs)("div",{className:c,children:[Object(M.jsx)("h1",{className:"text-lg font-bold",children:"Table of Contents"}),Object(M.jsx)("ul",{className:"pl-2",children:t.map((function(e){return Object(M.jsx)("li",{children:Object(M.jsx)(z,{href:"#".concat(F(e.section)),children:e.section})},e.section)}))}),Object(M.jsx)(S.b,{to:"/conductor/export",className:"block w-full p-2 my-2 text-center text-white bg-blue-600 rounded shadow-sm hover:bg-blue-700",children:"Export to Markdown"}),Object(M.jsx)("button",{onClick:function(){n({type:g})},className:"block w-full p-2 my-2 text-sm text-center text-white bg-gray-600 rounded shadow-sm hover:bg-gray-700",children:"Reset"})]})}function te(e,t){var n=Object(a.b)();return{handleScoreSelected:r.a.useCallback((function(c){n(function(e){var t=e.section,n=e.prompt,c=e.score;return{type:O,payload:{section:t,prompt:n,score:c}}}({section:e,prompt:t,score:c}))}),[e,t,n]),handleScoreCleared:r.a.useCallback((function(){n(function(e){var t=e.section,n=e.prompt;return console.log("Remove item: Section: ".concat(t,", Prompt: ").concat(n)),{type:m,payload:{section:t,prompt:n}}}({section:e,prompt:t}))}),[e,t,n]),handleNotesChanged:r.a.useCallback((function(c){n(function(e){var t=e.section,n=e.prompt,c=e.notes;return{type:x,payload:{section:t,prompt:n,notes:c}}}({section:e,prompt:t,notes:c}))}),[e,t,n]),handleWeightChanged:r.a.useCallback((function(c){n(function(e){var t=e.section,n=e.prompt,c=e.weight;return{type:f,payload:{section:t,prompt:n,weight:c}}}({section:e,prompt:t,weight:c}))}),[e,t,n])}}function ne(e){var t=e.section,n=e.entry,c=e.bgcolor,r=e.visible,o=function(e,t){return Object(a.c)((function(e){return e.data})).find((function(n){return n.section===e&&n.prompt===t}))}(t,n.prompt),s=te(t,n.prompt),i=s.handleScoreSelected,l=s.handleScoreCleared,u=s.handleNotesChanged,d=s.handleWeightChanged,b=function(e){return e&&e.score?e.score:0}(o),j=function(e){return e&&e.notes?e.notes:""}(o),p=function(e){return e&&void 0!==e.weight?e.weight:1}(o);return Object(M.jsx)(oe,{entry:n,prompt:n.prompt,section:t,score:b,notes:j,weight:p,handleWeightChanged:d,handleScoreCleared:l,handleScoreSelected:i,handleNotesChanged:u,bgcolor:c,visible:r})}function ce(e,t,n,c,r){return Object(M.jsxs)("div",{style:{flexWrap:"wrap",flexDirection:"row"},children:[Object(M.jsx)("button",{className:"w-4 h-4",style:{display:"inline-block"},onClick:function(e){c++,n(c),r(c)},children:Object(M.jsx)(K,{})}),Object(M.jsx)("p",{style:{display:"inline-block",padding:2.5},children:c}),Object(M.jsx)("button",{className:"w-4 h-4",style:{display:"inline-block"},onClick:function(e){c&&c--,n(c),r(c)},children:Object(M.jsx)(Q,{size:"4"})}),Object(M.jsx)("p",{className:"pr-4 text-base",style:{display:"inline-block",padding:5},children:t})]})}function re(e){var t=e.entry,n=e.prompt,r=e.section,o=e.score,s=e.notes,a=e.weight,i=e.handleWeightChanged,l=e.handleScoreCleared,u=e.handleScoreSelected,d=e.handleNotesChanged,b=e.bgcolor,j=e.visible,p=Object(c.useState)(!1),O=Object(W.a)(p,2),x=O[0],f=O[1],m=Object(c.useState)(a),g=Object(W.a)(m,2),v=g[0],y=g[1],w=j?"block":"none",N=function(e){return e.map((function(e){return Object(M.jsxs)("div",{children:[e,Object(M.jsx)("br",{})]},e)}))};return n&&Object(M.jsxs)("div",{className:"mb-4",style:{backgroundColor:b,padding:5,display:w},children:[Object(M.jsxs)("div",{className:"flex-row items-center justify-between md:flex",children:[Object(M.jsx)(V.a,{placement:"bottom",delay:{show:250,hide:400},overlay:function(e){var n=t.details?t.details.split(","):[];return t.details?Object(M.jsx)(X.a,Object(h.a)(Object(h.a)({},e),{},{className:"flex-row items-center p-2 justify-start w-full md:w-2/5 text-base text-left text-white bg-gray-600 rounded",children:n.length?N(n):t.details})):Object(M.jsx)("div",{style:{display:"none"}})},children:Object(M.jsx)("div",{className:"w-full md:w-3/5",children:ce(0,n,i,v,y)})}),Object(M.jsxs)("div",{className:"flex items-center w-full space-x-2 md:w-2/5 md:justify-end sm:justify-center sm:self-center",children:[Object(M.jsx)(J,{score:o,onScoreSelect:u,onScoreClear:l}),Object(M.jsxs)("button",{className:"flex items-center p-2 space-x-2 bg-gray-100 rounded hover:bg-gray-200",onClick:function(e){return f((function(e){return!e}))},children:[x?Object(M.jsx)("div",{className:"w-4 h-4",children:Object(M.jsx)(Q,{size:"4"})}):Object(M.jsx)("div",{className:"w-4 h-4",children:Object(M.jsx)(K,{size:"4"})}),"\ud83d\udcdd"]}),Object(M.jsx)("button",{type:"button",onClick:function(e){return l({section:r,prompt:n})},className:"p-2 bg-gray-100 rounded hover:bg-gray-200",children:"\u274c"})]})]}),Object(M.jsxs)("div",{children:[x&&Object(M.jsx)(q,{row:"3",className:"w-full p-2 border border-gray-300",placeholder:"notes...",value:s,onChange:function(e){return d(e.target.value)}}),!x&&s.length>0&&Object(M.jsx)("div",{className:"p-4 bg-gray-200",dangerouslySetInnerHTML:{__html:Object(G.a)(s)}})]})]},n)}var oe=r.a.memo(re);var se=function(){return Object(M.jsx)(a.a,{store:C,children:Object(M.jsx)(i.a,{loading:null,persistor:k,children:Object(M.jsx)(S.a,{children:Object(M.jsxs)(E.d,{children:[Object(M.jsx)(E.b,{path:"/conductor/export",children:Object(M.jsx)(T,{})}),Object(M.jsx)(E.b,{path:"/conductor",children:Object(M.jsx)(Y,{})}),Object(M.jsx)(E.a,{from:"/",to:"/conductor"})]})})})})};n(92);s.a.render(Object(M.jsx)(se,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.656ea1e0.chunk.js.map